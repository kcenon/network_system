<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network System: Network System Separation Plan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Network System
   </div>
   <div id="projectbrief">High-performance modular networking library for scalable client-server applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Network System Separation Plan</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md230"></a></p>
<h1><a class="anchor" id="autotoc_md231"></a>
Detailed Plan for Separating network_system from messaging_system</h1>
<p><b>Date</b>: 2025-09-19 <b>Version</b>: 1.0.0 <b>Owner</b>: kcenon</p>
<hr  />
<h2><a class="anchor" id="autotoc_md233"></a>
📋 Project Overview</h2>
<h3><a class="anchor" id="autotoc_md234"></a>
Objective</h3>
<p>Separate the network module from messaging_system into an independent network_system to improve modularity, reusability, and maintainability.</p>
<h3><a class="anchor" id="autotoc_md235"></a>
Scope</h3>
<ul>
<li>Complete separation of <code>Sources/messaging_system/network/</code> module</li>
<li>Integration or replacement with existing <code>Sources/network_system/</code></li>
<li>Maintain compatibility with messaging_system</li>
<li>Integration with other separated systems (container_system, database_system, thread_system)</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md237"></a>
🏗️ Current State Analysis</h2>
<h3><a class="anchor" id="autotoc_md238"></a>
messaging_system/network Structure</h3>
<div class="fragment"><div class="line">messaging_system/network/</div>
<div class="line">├── core/                               # Public API layer</div>
<div class="line">│   ├── messaging_client.h/cpp             # TCP client implementation</div>
<div class="line">│   └── messaging_server.h/cpp             # TCP server implementation</div>
<div class="line">├── session/                            # Session management layer</div>
<div class="line">│   └── messaging_session.h/cpp            # Connection session handling</div>
<div class="line">├── internal/                           # Internal implementation layer</div>
<div class="line">│   ├── tcp_socket.h/cpp                   # TCP socket wrapper</div>
<div class="line">│   ├── send_coroutine.h/cpp               # Async send coroutines</div>
<div class="line">│   ├── pipeline.h/cpp                     # Message pipeline</div>
<div class="line">│   └── common_defs.h                      # Common definitions</div>
<div class="line">├── network/                            # Integration interface</div>
<div class="line">│   └── network.h                          # Main header</div>
<div class="line">├── CMakeLists.txt                      # Build configuration</div>
<div class="line">└── README.md                           # Module documentation</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md239"></a>
Existing network_system Structure</h3>
<div class="fragment"><div class="line">network_system/</div>
<div class="line">├── core/                               # Existing network core</div>
<div class="line">├── internal/                           # Existing internal implementation</div>
<div class="line">├── session/                            # Existing session management</div>
<div class="line">├── samples/                            # Sample code</div>
<div class="line">├── tests/                             # Test code</div>
<div class="line">├── CMakeLists.txt                     # Build file</div>
<div class="line">└── README.md                          # Project documentation</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md240"></a>
Key Dependencies</h3>
<ul>
<li><b>ASIO</b>: Asynchronous I/O and networking</li>
<li><b>fmt</b>: String formatting library</li>
<li><b>container_system</b>: Message serialization/deserialization</li>
<li><b>thread_system</b>: Asynchronous task scheduling</li>
<li><b>utilities</b>: System utilities (internal to messaging_system)</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md242"></a>
🎯 Separation Strategy</h2>
<h3><a class="anchor" id="autotoc_md243"></a>
1. Basic Principles</h3>
<ul>
<li><b>Gradual Migration</b>: Ensure existing code compatibility while progressive separation</li>
<li><b>Dependency Inversion</b>: network_system operates independently but can integrate when needed</li>
<li><b>Follow Existing Patterns</b>: Adhere to structures and patterns of successfully separated systems</li>
<li><b>Performance Optimization</b>: Minimize performance overhead from separation</li>
</ul>
<h3><a class="anchor" id="autotoc_md244"></a>
2. Namespace Policy</h3>
<div class="fragment"><div class="line"><span class="comment">// Existing (inside messaging_system)</span></div>
<div class="line"><span class="keyword">namespace </span>network_module { ... }</div>
<div class="line"> </div>
<div class="line"><span class="comment">// New (independent network_system)</span></div>
<div class="line"><span class="keyword">namespace </span>network_system {</div>
<div class="line">    <span class="keyword">namespace </span>core { ... }          <span class="comment">// Core API</span></div>
<div class="line">    <span class="keyword">namespace </span>session { ... }       <span class="comment">// Session management</span></div>
<div class="line">    <span class="keyword">namespace </span>integration { ... }   <span class="comment">// System integration interfaces</span></div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md245"></a>
3. Compatibility Layer</h3>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>network_system::integration {</div>
<div class="line">    <span class="comment">// Bridge for messaging_system compatibility</span></div>
<div class="line">    <span class="keyword">class </span>messaging_bridge;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// container_system integration</span></div>
<div class="line">    <span class="keyword">class </span>container_integration;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// thread_system integration</span></div>
<div class="line">    <span class="keyword">class </span>thread_integration;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md247"></a>
📅 Implementation Roadmap</h2>
<h3><a class="anchor" id="autotoc_md248"></a>
Phase 1: Preparation and Analysis (2-3 days)</h3>
<h4><a class="anchor" id="autotoc_md249"></a>
Day 1</h4>
<ul>
<li>[ ] Complete backup of messaging_system/network</li>
<li>[ ] Detailed analysis of differences with existing network_system</li>
<li>[ ] Create dependency graph</li>
<li>[ ] Review migration scenarios</li>
</ul>
<h4><a class="anchor" id="autotoc_md250"></a>
Day 2</h4>
<ul>
<li>[ ] Design new directory structure</li>
<li>[ ] Define namespace and module boundaries</li>
<li>[ ] Design integration interfaces</li>
<li>[ ] Design build system architecture</li>
</ul>
<h4><a class="anchor" id="autotoc_md251"></a>
Day 3</h4>
<ul>
<li>[ ] Establish testing strategy</li>
<li>[ ] Set performance benchmark baselines</li>
<li>[ ] Create rollback plan</li>
</ul>
<h3><a class="anchor" id="autotoc_md252"></a>
Phase 2: Core System Separation (4-5 days)</h3>
<h4><a class="anchor" id="autotoc_md253"></a>
Day 4-5</h4>
<ul>
<li>[ ] Create new network_system directory structure</li>
<li>[ ] Copy and reorganize messaging_system/network code</li>
<li>[ ] Apply namespace changes</li>
<li>[ ] Configure basic CMakeLists.txt</li>
</ul>
<h4><a class="anchor" id="autotoc_md254"></a>
Day 6-7</h4>
<ul>
<li>[ ] Reconfigure dependencies (ASIO, fmt, container_system, thread_system)</li>
<li>[ ] Implement independent build system</li>
<li>[ ] Configure vcpkg.json and dependency.sh</li>
</ul>
<h4><a class="anchor" id="autotoc_md255"></a>
Day 8</h4>
<ul>
<li>[ ] Write basic unit tests</li>
<li>[ ] Verify independent build</li>
</ul>
<h3><a class="anchor" id="autotoc_md256"></a>
Phase 3: Integration Interface Implementation (3-4 days)</h3>
<h4><a class="anchor" id="autotoc_md257"></a>
Day 9-10</h4>
<ul>
<li>[ ] Implement messaging_bridge class</li>
<li>[ ] container_system integration interface</li>
<li>[ ] thread_system integration interface</li>
</ul>
<h4><a class="anchor" id="autotoc_md258"></a>
Day 11-12</h4>
<ul>
<li>[ ] Implement compatibility API</li>
<li>[ ] Write integration tests</li>
</ul>
<h3><a class="anchor" id="autotoc_md259"></a>
Phase 4: messaging_system Update (2-3 days)</h3>
<h4><a class="anchor" id="autotoc_md260"></a>
Day 13-14</h4>
<ul>
<li>[ ] Update messaging_system CMakeLists.txt</li>
<li>[ ] Add external network_system usage option</li>
<li>[ ] Verify existing code compatibility</li>
</ul>
<h4><a class="anchor" id="autotoc_md261"></a>
Day 15</h4>
<ul>
<li>[ ] Run integration tests</li>
<li>[ ] Compare performance benchmarks</li>
</ul>
<h3><a class="anchor" id="autotoc_md262"></a>
Phase 5: Verification and Deployment (2-3 days)</h3>
<h4><a class="anchor" id="autotoc_md263"></a>
Day 16-17</h4>
<ul>
<li>[ ] Full system integration testing</li>
<li>[ ] Performance optimization</li>
<li>[ ] Update documentation</li>
</ul>
<h4><a class="anchor" id="autotoc_md264"></a>
Day 18</h4>
<ul>
<li>[ ] Final verification</li>
<li>[ ] Prepare for deployment</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md266"></a>
🛠️ Technical Implementation Details</h2>
<h3><a class="anchor" id="autotoc_md267"></a>
1. Directory Structure Reorganization</h3>
<h4><a class="anchor" id="autotoc_md268"></a>
Target Structure</h4>
<div class="fragment"><div class="line">Sources/network_system/</div>
<div class="line">├── include/network_system/             # Public headers</div>
<div class="line">│   ├── core/</div>
<div class="line">│   │   ├── messaging_client.h</div>
<div class="line">│   │   └── messaging_server.h</div>
<div class="line">│   ├── session/</div>
<div class="line">│   │   └── messaging_session.h</div>
<div class="line">│   ├── integration/</div>
<div class="line">│   │   ├── messaging_bridge.h</div>
<div class="line">│   │   ├── container_integration.h</div>
<div class="line">│   │   └── thread_integration.h</div>
<div class="line">│   └── network_system.h               # Main header</div>
<div class="line">├── src/                               # Implementation files</div>
<div class="line">│   ├── core/</div>
<div class="line">│   ├── session/</div>
<div class="line">│   ├── internal/</div>
<div class="line">│   └── integration/</div>
<div class="line">├── samples/                           # Sample code</div>
<div class="line">│   ├── basic_client_server/</div>
<div class="line">│   ├── container_integration/</div>
<div class="line">│   └── messaging_system_bridge/</div>
<div class="line">├── tests/                             # Tests</div>
<div class="line">│   ├── unit/</div>
<div class="line">│   ├── integration/</div>
<div class="line">│   └── performance/</div>
<div class="line">├── docs/                              # Documentation</div>
<div class="line">│   ├── api/</div>
<div class="line">│   ├── tutorials/</div>
<div class="line">│   └── migration_guide.md</div>
<div class="line">├── cmake/                             # CMake modules</div>
<div class="line">├── scripts/                           # Utility scripts</div>
<div class="line">│   ├── build.sh</div>
<div class="line">│   ├── dependency.sh</div>
<div class="line">│   └── migration/</div>
<div class="line">├── CMakeLists.txt                     # Main build file</div>
<div class="line">├── vcpkg.json                         # Package dependencies</div>
<div class="line">├── README.md                          # Project documentation</div>
<div class="line">└── CHANGELOG.md                       # Change history</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md269"></a>
2. CMake Build System</h3>
<h4><a class="anchor" id="autotoc_md270"></a>
Main CMakeLists.txt</h4>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line"> </div>
<div class="line">project(NetworkSystem</div>
<div class="line">    VERSION 2.0.0</div>
<div class="line">    DESCRIPTION &quot;High-performance modular network system&quot;</div>
<div class="line">    LANGUAGES CXX</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Options</div>
<div class="line">option(BUILD_SHARED_LIBS &quot;Build using shared libraries&quot; OFF)</div>
<div class="line">option(BUILD_TESTS &quot;Build tests&quot; ON)</div>
<div class="line">option(BUILD_SAMPLES &quot;Build samples&quot; ON)</div>
<div class="line">option(BUILD_WITH_CONTAINER_SYSTEM &quot;Build with container_system integration&quot; ON)</div>
<div class="line">option(BUILD_WITH_THREAD_SYSTEM &quot;Build with thread_system integration&quot; ON)</div>
<div class="line">option(BUILD_MESSAGING_BRIDGE &quot;Build messaging_system bridge&quot; ON)</div>
<div class="line"> </div>
<div class="line"># C++ Standard</div>
<div class="line">set(CMAKE_CXX_STANDARD 20)</div>
<div class="line">set(CMAKE_CXX_STANDARD_REQUIRED ON)</div>
<div class="line"> </div>
<div class="line"># Find packages</div>
<div class="line">find_package(asio CONFIG REQUIRED)</div>
<div class="line">find_package(fmt CONFIG REQUIRED)</div>
<div class="line"> </div>
<div class="line"># Conditional dependencies</div>
<div class="line">if(BUILD_WITH_CONTAINER_SYSTEM)</div>
<div class="line">    find_package(ContainerSystem CONFIG REQUIRED)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">if(BUILD_WITH_THREAD_SYSTEM)</div>
<div class="line">    find_package(ThreadSystem CONFIG REQUIRED)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Create library</div>
<div class="line">add_subdirectory(src)</div>
<div class="line"> </div>
<div class="line"># Tests</div>
<div class="line">if(BUILD_TESTS)</div>
<div class="line">    enable_testing()</div>
<div class="line">    add_subdirectory(tests)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Samples</div>
<div class="line">if(BUILD_SAMPLES)</div>
<div class="line">    add_subdirectory(samples)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Installation rules</div>
<div class="line">include(GNUInstallDirs)</div>
<div class="line">install(TARGETS NetworkSystem</div>
<div class="line">    EXPORT NetworkSystemTargets</div>
<div class="line">    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}</div>
<div class="line">    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}</div>
<div class="line">    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">install(DIRECTORY include/</div>
<div class="line">    DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Config file generation</div>
<div class="line">install(EXPORT NetworkSystemTargets</div>
<div class="line">    FILE NetworkSystemTargets.cmake</div>
<div class="line">    NAMESPACE NetworkSystem::</div>
<div class="line">    DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/NetworkSystem</div>
<div class="line">)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md271"></a>
3. Integration Interface Design</h3>
<h4><a class="anchor" id="autotoc_md272"></a>
messaging_bridge.h</h4>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;network_system/core/messaging_client.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;network_system/core/messaging_server.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef BUILD_WITH_CONTAINER_SYSTEM</span></div>
<div class="line"><span class="preprocessor">#include &quot;container_system/container.h&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>network_system::integration {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>messaging_bridge {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    messaging_bridge();</div>
<div class="line">    ~messaging_bridge();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// messaging_system compatible API</span></div>
<div class="line">    std::shared_ptr&lt;core::messaging_server&gt; create_server(</div>
<div class="line">        <span class="keyword">const</span> std::string&amp; server_id</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    std::shared_ptr&lt;core::messaging_client&gt; create_client(</div>
<div class="line">        <span class="keyword">const</span> std::string&amp; client_id</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef BUILD_WITH_CONTAINER_SYSTEM</span></div>
<div class="line">    <span class="comment">// container_system integration</span></div>
<div class="line">    <span class="keywordtype">void</span> set_container_factory(</div>
<div class="line">        std::shared_ptr&lt;container_system::factory&gt; factory</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> set_container_message_handler(</div>
<div class="line">        std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> container_system::message&amp;)&gt; handler</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef BUILD_WITH_THREAD_SYSTEM</span></div>
<div class="line">    <span class="comment">// thread_system integration</span></div>
<div class="line">    <span class="keywordtype">void</span> set_thread_pool(</div>
<div class="line">        std::shared_ptr&lt;thread_system::thread_pool&gt; pool</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Performance monitoring</span></div>
<div class="line">    <span class="keyword">struct </span>performance_metrics {</div>
<div class="line">        uint64_t messages_sent = 0;</div>
<div class="line">        uint64_t messages_received = 0;</div>
<div class="line">        uint64_t bytes_sent = 0;</div>
<div class="line">        uint64_t bytes_received = 0;</div>
<div class="line">        uint64_t connections_active = 0;</div>
<div class="line">        std::chrono::milliseconds avg_latency{0};</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    performance_metrics get_metrics() <span class="keyword">const</span>;</div>
<div class="line">    <span class="keywordtype">void</span> reset_metrics();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keyword">class </span>impl;</div>
<div class="line">    std::unique_ptr&lt;impl&gt; pimpl_;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace network_system::integration</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md273"></a>
4. Dependency Management</h3>
<h4><a class="anchor" id="autotoc_md274"></a>
vcpkg.json</h4>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;network-system&quot;,</div>
<div class="line">    &quot;version-string&quot;: &quot;2.0.0&quot;,</div>
<div class="line">    &quot;description&quot;: &quot;High-performance modular network system&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [</div>
<div class="line">        &quot;asio&quot;,</div>
<div class="line">        &quot;fmt&quot;,</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;gtest&quot;,</div>
<div class="line">            &quot;$condition&quot;: &quot;BUILD_TESTS&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;benchmark&quot;,</div>
<div class="line">            &quot;$condition&quot;: &quot;BUILD_TESTS&quot;</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;features&quot;: {</div>
<div class="line">        &quot;container-integration&quot;: {</div>
<div class="line">            &quot;description&quot;: &quot;Enable container_system integration&quot;,</div>
<div class="line">            &quot;dependencies&quot;: [</div>
<div class="line">                &quot;container-system&quot;</div>
<div class="line">            ]</div>
<div class="line">        },</div>
<div class="line">        &quot;thread-integration&quot;: {</div>
<div class="line">            &quot;description&quot;: &quot;Enable thread_system integration&quot;,</div>
<div class="line">            &quot;dependencies&quot;: [</div>
<div class="line">                &quot;thread-system&quot;</div>
<div class="line">            ]</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md275"></a>
dependency.sh</h4>
<div class="fragment"><div class="line">#!/bin/bash</div>
<div class="line"> </div>
<div class="line">set -e</div>
<div class="line"> </div>
<div class="line">SCRIPT_DIR=&quot;$(cd &quot;$(dirname &quot;${BASH_SOURCE[0]}&quot;)&quot; &amp;&amp; pwd)&quot;</div>
<div class="line">PROJECT_ROOT=&quot;$SCRIPT_DIR&quot;</div>
<div class="line"> </div>
<div class="line">echo &quot;=========================================&quot;</div>
<div class="line">echo &quot;Network System Dependency Setup&quot;</div>
<div class="line">echo &quot;=========================================&quot;</div>
<div class="line"> </div>
<div class="line"># Check vcpkg</div>
<div class="line">if ! command -v vcpkg &amp;&gt; /dev/null; then</div>
<div class="line">    echo &quot;Error: vcpkg not found. Please install vcpkg first.&quot;</div>
<div class="line">    exit 1</div>
<div class="line">fi</div>
<div class="line"> </div>
<div class="line"># Install basic dependencies</div>
<div class="line">echo &quot;Installing basic dependencies...&quot;</div>
<div class="line">vcpkg install asio fmt</div>
<div class="line"> </div>
<div class="line"># Conditional dependencies</div>
<div class="line">if [[ &quot;${BUILD_TESTS:-ON}&quot; == &quot;ON&quot; ]]; then</div>
<div class="line">    echo &quot;Installing test dependencies...&quot;</div>
<div class="line">    vcpkg install gtest benchmark</div>
<div class="line">fi</div>
<div class="line"> </div>
<div class="line"># Check external system dependencies</div>
<div class="line">echo &quot;Checking external system dependencies...&quot;</div>
<div class="line"> </div>
<div class="line"># Check container_system</div>
<div class="line">CONTAINER_SYSTEM_DIR=&quot;../container_system&quot;</div>
<div class="line">if [[ -d &quot;$CONTAINER_SYSTEM_DIR&quot; ]]; then</div>
<div class="line">    echo &quot;Found container_system at $CONTAINER_SYSTEM_DIR&quot;</div>
<div class="line">    export BUILD_WITH_CONTAINER_SYSTEM=ON</div>
<div class="line">else</div>
<div class="line">    echo &quot;Warning: container_system not found. Integration will be disabled.&quot;</div>
<div class="line">    export BUILD_WITH_CONTAINER_SYSTEM=OFF</div>
<div class="line">fi</div>
<div class="line"> </div>
<div class="line"># Check thread_system</div>
<div class="line">THREAD_SYSTEM_DIR=&quot;../thread_system&quot;</div>
<div class="line">if [[ -d &quot;$THREAD_SYSTEM_DIR&quot; ]]; then</div>
<div class="line">    echo &quot;Found thread_system at $THREAD_SYSTEM_DIR&quot;</div>
<div class="line">    export BUILD_WITH_THREAD_SYSTEM=ON</div>
<div class="line">else</div>
<div class="line">    echo &quot;Warning: thread_system not found. Integration will be disabled.&quot;</div>
<div class="line">    export BUILD_WITH_THREAD_SYSTEM=OFF</div>
<div class="line">fi</div>
<div class="line"> </div>
<div class="line">echo &quot;Dependency setup completed successfully!&quot;</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md277"></a>
🧪 Testing Strategy</h2>
<h3><a class="anchor" id="autotoc_md278"></a>
1. Unit Tests</h3>
<ul>
<li><b>Core modules</b>: Individual functionality testing of messaging_client, messaging_server</li>
<li><b>Session modules</b>: Connection management and session state testing</li>
<li><b>Integration modules</b>: Bridge and integration interface testing</li>
</ul>
<h3><a class="anchor" id="autotoc_md279"></a>
2. Integration Tests</h3>
<ul>
<li><b>Independent operation</b>: Standalone network_system client-server communication</li>
<li><b>container_system integration</b>: Message serialization/deserialization integration</li>
<li><b>thread_system integration</b>: Asynchronous task scheduling integration</li>
<li><b>messaging_system compatibility</b>: Compatibility verification with existing code</li>
</ul>
<h3><a class="anchor" id="autotoc_md280"></a>
3. Performance Tests</h3>
<ul>
<li><b>Throughput</b>: Messages/second processing performance</li>
<li><b>Latency</b>: Message transmission latency</li>
<li><b>Memory usage</b>: Memory usage per connection</li>
<li><b>CPU utilization</b>: CPU efficiency under load</li>
</ul>
<h3><a class="anchor" id="autotoc_md281"></a>
4. Stress Tests</h3>
<ul>
<li><b>High connection load</b>: 10K+ concurrent connection handling</li>
<li><b>Long-term operation</b>: 24+ hour stability testing</li>
<li><b>Memory leak detection</b>: Long-term memory leak inspection</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md283"></a>
📊 Performance Requirements</h2>
<h3><a class="anchor" id="autotoc_md284"></a>
Baseline (Before Separation)</h3>
<ul>
<li><b>Throughput</b>: 100K messages/sec (1KB messages, localhost)</li>
<li><b>Latency</b>: &lt; 1ms (message processing latency)</li>
<li><b>Concurrent connections</b>: 10K+ connections</li>
<li><b>Memory usage</b>: ~8KB per connection</li>
</ul>
<h3><a class="anchor" id="autotoc_md285"></a>
Target (After Separation)</h3>
<ul>
<li><b>Throughput</b>: &gt;= 100K messages/sec (performance degradation &lt; 5%)</li>
<li><b>Latency</b>: &lt; 1.2ms (bridge overhead &lt; 20%)</li>
<li><b>Concurrent connections</b>: 10K+ connections (no change)</li>
<li><b>Memory usage</b>: ~10KB per connection (increase &lt; 25%)</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md287"></a>
🚨 Risk Factors and Mitigation</h2>
<h3><a class="anchor" id="autotoc_md288"></a>
1. Major Risks</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Risk Factor   </th><th class="markdownTableHeadNone">Impact   </th><th class="markdownTableHeadNone">Probability   </th><th class="markdownTableHeadNone">Mitigation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Conflict with existing network_system   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Namespace separation, rename existing system    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Circular dependencies   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Interface-based dependency inversion    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance degradation   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Zero-copy bridge, optimized integration layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Compatibility issues   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Thorough compatibility testing, gradual migration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Increased build complexity   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Automated build scripts, clear documentation   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md289"></a>
2. Rollback Plan</h3>
<ul>
<li><b>Phase checkpoints</b>: Set rollback points for each phase</li>
<li><b>Backup retention</b>: Keep original code backups (minimum 30 days)</li>
<li><b>Feature toggles</b>: Runtime switching between old/new systems</li>
<li><b>Performance monitoring</b>: Real-time performance monitoring for early problem detection</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md291"></a>
📝 Documentation Plan</h2>
<h3><a class="anchor" id="autotoc_md292"></a>
1. API Documentation</h3>
<ul>
<li><b>Doxygen</b>: Auto-generated API reference</li>
<li><b>Usage examples</b>: Practical, usable code examples</li>
<li><b>Migration guide</b>: Transition methods from messaging_system</li>
</ul>
<h3><a class="anchor" id="autotoc_md293"></a>
2. Architecture Documentation</h3>
<ul>
<li><b>System design</b>: Overall architecture and inter-module relationships</li>
<li><b>Dependency graph</b>: Visual dependency relationship diagrams</li>
<li><b>Performance characteristics</b>: Benchmark results and optimization guides</li>
</ul>
<h3><a class="anchor" id="autotoc_md294"></a>
3. Operations Documentation</h3>
<ul>
<li><b>Build guide</b>: Build methods for various environments</li>
<li><b>Deployment guide</b>: Production environment deployment procedures</li>
<li><b>Troubleshooting</b>: Common problems and solutions</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md296"></a>
✅ Completion Checklist</h2>
<h3><a class="anchor" id="autotoc_md297"></a>
Phase 1: Preparation and Analysis</h3>
<ul>
<li>[ ] messaging_system/network backup completed</li>
<li>[ ] Analysis of differences with existing network_system completed</li>
<li>[ ] Dependency graph creation completed</li>
<li>[ ] New directory structure design completed</li>
<li>[ ] Namespace definition completed</li>
<li>[ ] Testing strategy established</li>
</ul>
<h3><a class="anchor" id="autotoc_md298"></a>
Phase 2: Core System Separation</h3>
<ul>
<li>[ ] New directory structure creation completed</li>
<li>[ ] Code copy and reorganization completed</li>
<li>[ ] Namespace changes applied</li>
<li>[ ] Basic CMakeLists.txt configuration completed</li>
<li>[ ] Dependency reconfiguration completed</li>
<li>[ ] Independent build system implementation completed</li>
<li>[ ] Basic unit tests written</li>
</ul>
<h3><a class="anchor" id="autotoc_md299"></a>
Phase 3: Integration Interface Implementation</h3>
<ul>
<li>[ ] messaging_bridge class implementation completed</li>
<li>[ ] container_system integration interface completed</li>
<li>[ ] thread_system integration interface completed</li>
<li>[ ] Compatibility API implementation completed</li>
<li>[ ] Integration tests written</li>
</ul>
<h3><a class="anchor" id="autotoc_md300"></a>
Phase 4: messaging_system Update</h3>
<ul>
<li>[ ] messaging_system CMakeLists.txt update completed</li>
<li>[ ] External network_system usage option added</li>
<li>[ ] Existing code compatibility verification completed</li>
<li>[ ] Integration tests executed</li>
<li>[ ] Performance benchmark comparison completed</li>
</ul>
<h3><a class="anchor" id="autotoc_md301"></a>
Phase 5: Verification and Deployment</h3>
<ul>
<li>[ ] Full system integration testing completed</li>
<li>[ ] Performance optimization completed</li>
<li>[ ] Documentation update completed</li>
<li>[ ] Final verification completed</li>
<li>[ ] Deployment preparation completed</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md303"></a>
📞 Contact and Support</h2>
<p><b>Project Owner</b>: kcenon (<a href="#" onclick="location.href='mai'+'lto:'+'kce'+'no'+'n@n'+'av'+'er.'+'co'+'m'; return false;">kceno<span class="obfuscator">.nosp@m.</span>n@na<span class="obfuscator">.nosp@m.</span>ver.c<span class="obfuscator">.nosp@m.</span>om</a>) <b>Project Duration</b>: 2025-09-19 ~ 2025-10-07 (estimated 18 days) <b>Status</b>: Plan completed, awaiting implementation</p>
<hr  />
<p><em>This document is the master plan for network_system separation work. It will be continuously updated according to the progress of each phase.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
