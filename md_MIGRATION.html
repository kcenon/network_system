<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network System: Migration Guide: messaging_system to network_system</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Network System
   </div>
   <div id="projectbrief">High-performance modular networking library for scalable client-server applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Migration Guide: messaging_system to network_system</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md181"></a> </p><blockquote class="doxtable">
<p>&zwj;<b>Language:</b> <b>English</b> | 한국어 </p>
</blockquote>
<p><b>Document Version</b>: 1.0.0 <b>Last Updated</b>: 2025-10-22 <b>Maintainer</b>: <a href="#" onclick="location.href='mai'+'lto:'+'kce'+'no'+'n@n'+'av'+'er.'+'co'+'m'; return false;">kceno<span class="obfuscator">.nosp@m.</span>n@na<span class="obfuscator">.nosp@m.</span>ver.c<span class="obfuscator">.nosp@m.</span>om</a></p>
<hr  />
<h1><a class="anchor" id="autotoc_md183"></a>
Table of Contents</h1>
<ul>
<li>Overview<ul>
<li>What Changed</li>
<li>Why This Migration</li>
<li>Migration Paths</li>
</ul>
</li>
<li>Quick Migration Checklist</li>
<li>Step-by-Step Migration Guide<ul>
<li>Phase 1: Preparation</li>
<li>Phase 2: Update Build Configuration</li>
<li>Phase 3: Update Code</li>
<li>Phase 4: Verify Migration</li>
</ul>
</li>
<li>Before and After Examples<ul>
<li>CMake Configuration</li>
<li>Include Statements</li>
<li>Namespace Usage</li>
<li>Server Creation</li>
<li>Client Usage</li>
</ul>
</li>
<li>Common Migration Issues<ul>
<li>Build Issues</li>
<li>Runtime Issues</li>
<li>Performance Issues</li>
<li>Integration Issues</li>
</ul>
</li>
<li>Testing Your Migration<ul>
<li>Compilation Tests</li>
<li>Functional Tests</li>
<li>Performance Tests</li>
<li>Integration Tests</li>
</ul>
</li>
<li>Rollback Plan<ul>
<li>Quick Rollback</li>
<li>Partial Rollback</li>
</ul>
</li>
<li>Performance Expectations</li>
<li>Support and Resources</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md185"></a>
Overview</h1>
<p>The <b>network_system</b> is an independent, high-performance C++20 asynchronous network library that has been successfully extracted from the <code>messaging_system</code> project. This migration guide helps you transition from the integrated network module to the standalone library.</p>
<h2><a class="anchor" id="autotoc_md186"></a>
What Changed</h2>
<p>The network module has been separated from <code>messaging_system</code> into an independent library with the following changes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Before (messaging_system)   </th><th class="markdownTableHeadNone">After (network_system)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Namespace</b>   </td><td class="markdownTableBodyNone"><code>messaging::network</code>   </td><td class="markdownTableBodyNone"><code>kcenon::network::core</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Header Path</b>   </td><td class="markdownTableBodyNone"><code>&lt;messaging/network/*&gt;</code>   </td><td class="markdownTableBodyNone"><code>&lt;network_system/*&gt;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>CMake Target</b>   </td><td class="markdownTableBodyNone"><code>messaging_system</code>   </td><td class="markdownTableBodyNone"><code>NetworkSystem::NetworkSystem</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Repository</b>   </td><td class="markdownTableBodyNone">Part of messaging_system   </td><td class="markdownTableBodyNone">Independent repository    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Dependencies</b>   </td><td class="markdownTableBodyNone">Tightly coupled   </td><td class="markdownTableBodyNone">Optional integration   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md187"></a>
Why This Migration</h2>
<p>The separation provides several key benefits:</p>
<ul>
<li>✅ <b>Modularity</b>: Use network functionality independently without messaging_system overhead</li>
<li>✅ <b>Reusability</b>: Integrate network_system into any C++ project</li>
<li>✅ <b>Performance</b>: 305K+ messages/second throughput, 3x improvement over legacy</li>
<li>✅ <b>Maintainability</b>: Independent development cycle and versioning</li>
<li>✅ <b>Backward Compatibility</b>: 100% compatibility maintained through compatibility layer</li>
</ul>
<h2><a class="anchor" id="autotoc_md188"></a>
Migration Paths</h2>
<p>You have <b>two migration options</b>:</p>
<h3><a class="anchor" id="autotoc_md189"></a>
Option 1: Compatibility Mode (Recommended for Gradual Migration)</h3>
<p>Use the compatibility layer for minimal code changes. This approach:</p><ul>
<li>✅ Maintains existing namespaces (<code>network_module::</code>, <code>messaging::</code>)</li>
<li>✅ Keeps current API calls unchanged</li>
<li>✅ Allows gradual migration to modern API</li>
<li>✅ Zero breaking changes</li>
</ul>
<p><b>Best for</b>: Production systems requiring zero-downtime migration.</p>
<h3><a class="anchor" id="autotoc_md190"></a>
Option 2: Full Migration (Recommended for New Projects)</h3>
<p>Adopt the modern API directly. This approach:</p><ul>
<li>✅ Uses new namespace structure (<code>network_system::core::</code>)</li>
<li>✅ Leverages modern C++20 features</li>
<li>✅ Takes advantage of enhanced performance</li>
<li>✅ Provides better type safety with Result&lt;T&gt;</li>
</ul>
<p><b>Best for</b>: New projects or complete refactoring efforts.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md192"></a>
Quick Migration Checklist</h1>
<p>Use this checklist for a high-level overview of migration tasks:</p>
<h2><a class="anchor" id="autotoc_md193"></a>
Pre-Migration</h2>
<ul>
<li>[ ] <b>Backup your current codebase</b> (create git branch or backup directory)</li>
<li>[ ] <b>Review current network usage</b> (identify all files using network module)</li>
<li>[ ] <b>Check dependencies</b> (verify ASIO, OpenSSL, C++20 compiler availability)</li>
<li>[ ] <b>Choose migration path</b> (compatibility mode vs. full migration)</li>
</ul>
<h2><a class="anchor" id="autotoc_md194"></a>
Build System Migration</h2>
<ul>
<li>[ ] <b>Update CMakeLists.txt</b> (replace MessagingSystem with NetworkSystem)</li>
<li>[ ] <b>Configure package dependencies</b> (add network_system to vcpkg.json or equivalent)</li>
<li>[ ] <b>Set C++ standard</b> (ensure C++20 is enabled)</li>
<li>[ ] <b>Test build</b> (verify clean compilation)</li>
</ul>
<h2><a class="anchor" id="autotoc_md195"></a>
Code Migration</h2>
<ul>
<li>[ ] <b>Update include paths</b> (change header locations)</li>
<li>[ ] <b>Update namespaces</b> (or use compatibility layer)</li>
<li>[ ] <b>Add initialization code</b> (kcenon::network::compat::initialize())</li>
<li>[ ] <b>Update API calls</b> (if using modern API)</li>
<li>[ ] <b>Add shutdown code</b> (kcenon::network::compat::shutdown())</li>
</ul>
<h2><a class="anchor" id="autotoc_md196"></a>
Testing &amp; Validation</h2>
<ul>
<li>[ ] <b>Compile test</b> (ensure zero compilation errors)</li>
<li>[ ] <b>Unit tests</b> (run existing test suite)</li>
<li>[ ] <b>Integration tests</b> (verify end-to-end functionality)</li>
<li>[ ] <b>Performance benchmark</b> (compare against baseline)</li>
<li>[ ] <b>Memory leak check</b> (run with sanitizers)</li>
</ul>
<h2><a class="anchor" id="autotoc_md197"></a>
Documentation &amp; Deployment</h2>
<ul>
<li>[ ] <b>Update internal documentation</b> (reflect new dependencies)</li>
<li>[ ] <b>Update deployment scripts</b> (if applicable)</li>
<li>[ ] <b>Train team members</b> (share migration guide)</li>
<li>[ ] <b>Plan rollback strategy</b> (in case of issues)</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md199"></a>
Step-by-Step Migration Guide</h1>
<p>This section provides detailed, sequential instructions for migration.</p>
<h2><a class="anchor" id="autotoc_md200"></a>
Phase 1: Preparation</h2>
<h3><a class="anchor" id="autotoc_md201"></a>
Step 1.1: Backup Your Code</h3>
<p>Create a safety backup before making any changes:</p>
<div class="fragment"><div class="line"># Create a git branch for migration</div>
<div class="line">git checkout -b migration/network-system</div>
<div class="line">git push origin migration/network-system</div>
<div class="line"> </div>
<div class="line"># Or create a filesystem backup</div>
<div class="line">cp -r /path/to/your/project /path/to/backup/project_$(date +%Y%m%d_%H%M%S)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md202"></a>
Step 1.2: Audit Current Network Usage</h3>
<p>Identify all files using the network module:</p>
<div class="fragment"><div class="line"># Find all files including messaging_system network headers</div>
<div class="line">grep -r &quot;include.*messaging.*network&quot; /path/to/your/project/src</div>
<div class="line"> </div>
<div class="line"># Find all namespace usages</div>
<div class="line">grep -r &quot;messaging::network\|network_module&quot; /path/to/your/project/src</div>
<div class="line"> </div>
<div class="line"># Find all CMake references</div>
<div class="line">grep -r &quot;MessagingSystem&quot; /path/to/your/project/CMakeLists.txt</div>
</div><!-- fragment --><p>Create an inventory of files to update. Example format:</p>
<div class="fragment"><div class="line">Files to update:</div>
<div class="line">1. src/network/client.cpp - Uses messaging::network::client</div>
<div class="line">2. src/network/server.cpp - Uses messaging::network::server</div>
<div class="line">3. CMakeLists.txt - Links MessagingSystem</div>
<div class="line">4. include/app/network_manager.h - Includes &lt;messaging/network/tcp_server.h&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md203"></a>
Step 1.3: Verify Prerequisites</h3>
<p>Ensure your environment meets the requirements:</p>
<div class="fragment"><div class="line"># Check C++ compiler supports C++20</div>
<div class="line">g++ --version  # Should be GCC 10+ or Clang 10+</div>
<div class="line">clang++ --version</div>
<div class="line"> </div>
<div class="line"># Check CMake version</div>
<div class="line">cmake --version  # Should be 3.16+</div>
<div class="line"> </div>
<div class="line"># Check ASIO availability (if not using Boost)</div>
<div class="line">pkg-config --modversion asio  # Optional but recommended</div>
</div><!-- fragment --><p>Install missing dependencies:</p>
<div class="fragment"><div class="line"># Ubuntu/Debian</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install -y cmake ninja-build libasio-dev libssl-dev</div>
<div class="line"> </div>
<div class="line"># macOS</div>
<div class="line">brew install cmake ninja asio openssl</div>
<div class="line"> </div>
<div class="line"># Windows (MSYS2)</div>
<div class="line">pacman -S mingw-w64-x86_64-cmake mingw-w64-x86_64-ninja \</div>
<div class="line">          mingw-w64-x86_64-asio mingw-w64-x86_64-openssl</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md205"></a>
Phase 2: Update Build Configuration</h2>
<h3><a class="anchor" id="autotoc_md206"></a>
Step 2.1: Update CMakeLists.txt</h3>
<p>Replace messaging_system dependency with network_system:</p>
<p><b>Before:</b> </p><div class="fragment"><div class="line"># Old CMakeLists.txt</div>
<div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line">project(YourApplication)</div>
<div class="line"> </div>
<div class="line">set(CMAKE_CXX_STANDARD 17)</div>
<div class="line">set(CMAKE_CXX_STANDARD_REQUIRED ON)</div>
<div class="line"> </div>
<div class="line"># Find MessagingSystem</div>
<div class="line">find_package(MessagingSystem REQUIRED)</div>
<div class="line"> </div>
<div class="line"># Create executable</div>
<div class="line">add_executable(your_app main.cpp network_client.cpp)</div>
<div class="line"> </div>
<div class="line"># Link MessagingSystem</div>
<div class="line">target_link_libraries(your_app</div>
<div class="line">    PRIVATE</div>
<div class="line">    MessagingSystem::MessagingSystem</div>
<div class="line">)</div>
</div><!-- fragment --><p><b>After:</b> </p><div class="fragment"><div class="line"># New CMakeLists.txt</div>
<div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line">project(YourApplication)</div>
<div class="line"> </div>
<div class="line"># IMPORTANT: Upgrade to C++20</div>
<div class="line">set(CMAKE_CXX_STANDARD 20)</div>
<div class="line">set(CMAKE_CXX_STANDARD_REQUIRED ON)</div>
<div class="line"> </div>
<div class="line"># Find NetworkSystem</div>
<div class="line">find_package(NetworkSystem REQUIRED</div>
<div class="line">    PATHS /path/to/network_system/build</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Create executable</div>
<div class="line">add_executable(your_app main.cpp network_client.cpp)</div>
<div class="line"> </div>
<div class="line"># Link NetworkSystem</div>
<div class="line">target_link_libraries(your_app</div>
<div class="line">    PRIVATE</div>
<div class="line">    NetworkSystem::NetworkSystem</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Platform-specific dependencies</div>
<div class="line">if(WIN32)</div>
<div class="line">    target_link_libraries(your_app PRIVATE ws2_32 mswsock)</div>
<div class="line">    target_compile_definitions(your_app PRIVATE _WIN32_WINNT=0x0601)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Enable threading support</div>
<div class="line">find_package(Threads REQUIRED)</div>
<div class="line">target_link_libraries(your_app PRIVATE Threads::Threads)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md207"></a>
Step 2.2: Update Package Configuration (Optional)</h3>
<p>If using vcpkg or other package managers:</p>
<p><b>vcpkg.json</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;name&quot;: &quot;your-application&quot;,</div>
<div class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">  &quot;dependencies&quot;: [</div>
<div class="line">    &quot;asio&quot;,</div>
<div class="line">    &quot;openssl&quot;</div>
<div class="line">  ],</div>
<div class="line">  &quot;builtin-baseline&quot;: &quot;latest&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md208"></a>
Step 2.3: Configure Network System Build</h3>
<p>Build and install network_system first:</p>
<div class="fragment"><div class="line"># Clone network_system repository</div>
<div class="line">git clone https://github.com/kcenon/network_system.git</div>
<div class="line">cd network_system</div>
<div class="line"> </div>
<div class="line"># Create build directory</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line"> </div>
<div class="line"># Configure with desired options</div>
<div class="line">cmake .. -G Ninja \</div>
<div class="line">    -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line">    -DBUILD_WITH_THREAD_SYSTEM=ON \</div>
<div class="line">    -DBUILD_WITH_LOGGER_SYSTEM=ON \</div>
<div class="line">    -DBUILD_WITH_CONTAINER_SYSTEM=ON \</div>
<div class="line">    -DBUILD_WITH_COMMON_SYSTEM=ON \</div>
<div class="line">    -DBUILD_SHARED_LIBS=OFF</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">cmake --build . --parallel</div>
<div class="line"> </div>
<div class="line"># Install (optional, or reference build directory)</div>
<div class="line">sudo cmake --install .</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md210"></a>
Phase 3: Update Code</h2>
<h3><a class="anchor" id="autotoc_md211"></a>
Step 3.1: Choose Your Migration Strategy</h3>
<p><b>Strategy A: Compatibility Mode (Minimal Changes)</b></p>
<p>Use this if you want to migrate with zero code changes:</p>
<ol type="1">
<li>Include compatibility header</li>
<li>Keep existing namespace</li>
<li>Add initialization/shutdown calls</li>
</ol>
<p><b>Strategy B: Modern API (Full Refactor)</b></p>
<p>Use this for new projects or complete modernization:</p>
<ol type="1">
<li>Update all includes</li>
<li>Change namespaces</li>
<li>Adopt modern API patterns</li>
<li>Use Result&lt;T&gt; error handling</li>
</ol>
<h3><a class="anchor" id="autotoc_md212"></a>
Step 3.2: Update Includes</h3>
<p><b>Compatibility Mode:</b></p>
<div class="fragment"><div class="line"><span class="comment">// Before</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_server.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_client.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/session.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// After (Compatibility Mode)</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
</div><!-- fragment --><p><b>Modern API:</b></p>
<div class="fragment"><div class="line"><span class="comment">// Before</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_server.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_client.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// After (Modern API)</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_server.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_client.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/session/messaging_session.h&gt;</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md213"></a>
Step 3.3: Update Namespace References</h3>
<p><b>Compatibility Mode (No Changes):</b></p>
<div class="fragment"><div class="line"><span class="comment">// Your existing code continues to work:</span></div>
<div class="line"><span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;client_id&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or if you used messaging namespace:</span></div>
<div class="line"><span class="keyword">auto</span> server = messaging::create_server(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
</div><!-- fragment --><p><b>Modern API:</b></p>
<div class="fragment"><div class="line"><span class="comment">// Before</span></div>
<div class="line"><span class="keyword">using namespace </span>messaging::network;</div>
<div class="line"><span class="keyword">auto</span> server = create_server(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// After</span></div>
<div class="line"><span class="keyword">using namespace </span>kcenon::network::core;</div>
<div class="line"><span class="keyword">auto</span> server = std::make_shared&lt;messaging_server&gt;(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md214"></a>
Step 3.4: Add Initialization Code</h3>
<p>Add initialization at application startup:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Initialize network system</span></div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Your existing application code</span></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;my_server&quot;</span>);</div>
<div class="line">        server-&gt;start_server(8080);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Application logic...</span></div>
<div class="line"> </div>
<div class="line">        server-&gt;stop_server();</div>
<div class="line">    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">        kcenon::network::compat::shutdown();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cleanup</span></div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md215"></a>
Step 3.5: Update API Calls (If Using Modern API)</h3>
<p>If you chose the modern API migration path:</p>
<p><b>Before:</b> </p><div class="fragment"><div class="line"><span class="comment">// Legacy API</span></div>
<div class="line"><span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
<div class="line">server-&gt;start(<span class="stringliteral">&quot;0.0.0.0&quot;</span>, 8080);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;client_id&quot;</span>);</div>
<div class="line">client-&gt;connect(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">client-&gt;send(<span class="stringliteral">&quot;Hello&quot;</span>);</div>
</div><!-- fragment --><p><b>After:</b> </p><div class="fragment"><div class="line"><span class="comment">// Modern API with Result&lt;T&gt;</span></div>
<div class="line"><span class="keyword">auto</span> server = std::make_shared&lt;network_system::core::messaging_server&gt;(<span class="stringliteral">&quot;server_id&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> start_result = server-&gt;start_server(8080);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (start_result.is_err()) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to start server: &quot;</span></div>
<div class="line">              &lt;&lt; start_result.error().message</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot; (code: &quot;</span> &lt;&lt; start_result.error().code &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> client = std::make_shared&lt;network_system::core::messaging_client&gt;(<span class="stringliteral">&quot;client_id&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> connect_result = client-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (connect_result.is_ok()) {</div>
<div class="line">    std::vector&lt;uint8_t&gt; data = {<span class="charliteral">&#39;H&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;o&#39;</span>};</div>
<div class="line">    <span class="keyword">auto</span> send_result = client-&gt;send_packet(data);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (send_result.is_err()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Send failed: &quot;</span> &lt;&lt; send_result.error().message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md217"></a>
Phase 4: Verify Migration</h2>
<h3><a class="anchor" id="autotoc_md218"></a>
Step 4.1: Compilation Test</h3>
<p>Build your project to verify no compilation errors:</p>
<div class="fragment"><div class="line"># Clean build</div>
<div class="line">rm -rf build</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line"> </div>
<div class="line"># Configure</div>
<div class="line">cmake .. -G Ninja -DCMAKE_BUILD_TYPE=Debug</div>
<div class="line"> </div>
<div class="line"># Build with verbose output</div>
<div class="line">cmake --build . --verbose</div>
<div class="line"> </div>
<div class="line"># Check for warnings</div>
<div class="line">cmake --build . 2&gt;&amp;1 | grep -i &quot;warning&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md219"></a>
Step 4.2: Run Unit Tests</h3>
<p>Execute your existing test suite:</p>
<div class="fragment"><div class="line"># Run all tests</div>
<div class="line">ctest --output-on-failure --verbose</div>
<div class="line"> </div>
<div class="line"># Or run specific tests</div>
<div class="line">./build/your_network_test</div>
<div class="line"> </div>
<div class="line"># With sanitizers (recommended)</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Debug \</div>
<div class="line">         -DCMAKE_CXX_FLAGS=&quot;-fsanitize=address,undefined&quot;</div>
<div class="line">cmake --build .</div>
<div class="line">./build/your_network_test</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md220"></a>
Step 4.3: Verify Functionality</h3>
<p>Create a simple verification test:</p>
<div class="fragment"><div class="line"><span class="comment">// migration_verify.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Network System Migration Verification\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;======================================\n\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize</span></div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Test 1: Server creation and startup</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Test 1: Server creation and startup...&quot;</span> &lt;&lt; std::flush;</div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;verify_server&quot;</span>);</div>
<div class="line">    assert(server != <span class="keyword">nullptr</span>);</div>
<div class="line">    <span class="keyword">auto</span> result = server-&gt;start_server(9999);</div>
<div class="line">    assert(result.is_ok());</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; PASSED\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Give server time to start</span></div>
<div class="line">    std::this_thread::sleep_for(std::chrono::milliseconds(100));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Test 2: Client creation and connection</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Test 2: Client creation and connection...&quot;</span> &lt;&lt; std::flush;</div>
<div class="line">    <span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;verify_client&quot;</span>);</div>
<div class="line">    assert(client != <span class="keyword">nullptr</span>);</div>
<div class="line">    result = client-&gt;start_client(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 9999);</div>
<div class="line">    assert(result.is_ok());</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; PASSED\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Test 3: Data transmission</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Test 3: Data transmission...&quot;</span> &lt;&lt; std::flush;</div>
<div class="line">    std::vector&lt;uint8_t&gt; test_data = {<span class="charliteral">&#39;T&#39;</span>, <span class="charliteral">&#39;E&#39;</span>, <span class="charliteral">&#39;S&#39;</span>, <span class="charliteral">&#39;T&#39;</span>};</div>
<div class="line">    result = client-&gt;send_packet(test_data);</div>
<div class="line">    assert(result.is_ok());</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; PASSED\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cleanup</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Test 4: Cleanup...&quot;</span> &lt;&lt; std::flush;</div>
<div class="line">    client-&gt;stop_client();</div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; PASSED\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\n======================================\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;All migration verification tests PASSED!\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compile and run:</p>
<div class="fragment"><div class="line">g++ -std=c++20 migration_verify.cpp \</div>
<div class="line">    -I/path/to/network_system/include \</div>
<div class="line">    -L/path/to/network_system/build \</div>
<div class="line">    -lNetworkSystem -lpthread \</div>
<div class="line">    -o migration_verify</div>
<div class="line"> </div>
<div class="line">./migration_verify</div>
</div><!-- fragment --><p>Expected output: </p><div class="fragment"><div class="line">Network System Migration Verification</div>
<div class="line">======================================</div>
<div class="line"> </div>
<div class="line">Test 1: Server creation and startup... PASSED</div>
<div class="line">Test 2: Client creation and connection... PASSED</div>
<div class="line">Test 3: Data transmission... PASSED</div>
<div class="line">Test 4: Cleanup... PASSED</div>
<div class="line"> </div>
<div class="line">======================================</div>
<div class="line">All migration verification tests PASSED!</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md222"></a>
Before and After Examples</h1>
<p>This section provides comprehensive before/after comparisons.</p>
<h2><a class="anchor" id="autotoc_md223"></a>
CMake Configuration</h2>
<p><b>Before (messaging_system):</b> </p><div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line">project(MyNetworkApp CXX)</div>
<div class="line"> </div>
<div class="line">set(CMAKE_CXX_STANDARD 17)</div>
<div class="line">find_package(MessagingSystem REQUIRED)</div>
<div class="line"> </div>
<div class="line">add_executable(app main.cpp)</div>
<div class="line">target_link_libraries(app MessagingSystem::MessagingSystem)</div>
</div><!-- fragment --><p><b>After (network_system):</b> </p><div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line">project(MyNetworkApp CXX)</div>
<div class="line"> </div>
<div class="line">set(CMAKE_CXX_STANDARD 20)  # Upgraded to C++20</div>
<div class="line">find_package(NetworkSystem REQUIRED)</div>
<div class="line"> </div>
<div class="line">add_executable(app main.cpp)</div>
<div class="line">target_link_libraries(app NetworkSystem::NetworkSystem)</div>
<div class="line"> </div>
<div class="line"># Platform-specific libraries</div>
<div class="line">if(WIN32)</div>
<div class="line">    target_link_libraries(app ws2_32 mswsock)</div>
<div class="line">endif()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md224"></a>
Include Statements</h2>
<p><b>Before (messaging_system):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_server.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_client.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/session_manager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;messaging_system/network/pipeline.h&gt;</span></div>
</div><!-- fragment --><p><b>After (Compatibility Mode):</b> </p><div class="fragment"><div class="line"><span class="comment">// Single compatibility header replaces all</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
</div><!-- fragment --><p><b>After (Modern API):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_server.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_client.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/core/session_manager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/internal/pipeline.h&gt;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md225"></a>
Namespace Usage</h2>
<p><b>Before (messaging_system):</b> </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span>messaging::network;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_network() {</div>
<div class="line">    <span class="keyword">auto</span> server = std::make_shared&lt;tcp_server&gt;(<span class="stringliteral">&quot;server&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> client = std::make_shared&lt;tcp_client&gt;(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Compatibility Mode):</b> </p><div class="fragment"><div class="line"><span class="comment">// No changes needed - legacy namespaces still work</span></div>
<div class="line"><span class="keyword">using namespace </span>network_module;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_network() {</div>
<div class="line">    <span class="keyword">auto</span> server = create_server(<span class="stringliteral">&quot;server&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> client = create_client(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Modern API):</b> </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span>kcenon::network::core;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_network() {</div>
<div class="line">    <span class="keyword">auto</span> server = std::make_shared&lt;messaging_server&gt;(<span class="stringliteral">&quot;server&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> client = std::make_shared&lt;messaging_client&gt;(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md226"></a>
Server Creation</h2>
<p><b>Before (messaging_system):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_server.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> start_server() {</div>
<div class="line">    <span class="keyword">auto</span> server = std::make_shared&lt;messaging::network::tcp_server&gt;(<span class="stringliteral">&quot;my_server&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start server</span></div>
<div class="line">    server-&gt;start(<span class="stringliteral">&quot;0.0.0.0&quot;</span>, 8080);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set callback</span></div>
<div class="line">    server-&gt;on_message([](<span class="keyword">const</span> std::string&amp; msg) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Echo: &quot;</span> + msg;</div>
<div class="line">    });</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Compatibility Mode):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> start_server() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use legacy factory function</span></div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;my_server&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start server - modern API</span></div>
<div class="line">    <span class="keyword">auto</span> result = server-&gt;start_server(8080);</div>
<div class="line">    <span class="keywordflow">if</span> (result.is_err()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Start failed: &quot;</span> &lt;&lt; result.error().message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Note: set_message_handler not yet available in current version</span></div>
<div class="line">    <span class="comment">// Use session-based handling instead</span></div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Modern API):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_server.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> start_server() {</div>
<div class="line">    <span class="keyword">auto</span> server = std::make_shared&lt;network_system::core::messaging_server&gt;(<span class="stringliteral">&quot;my_server&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start server with Result&lt;T&gt; error handling</span></div>
<div class="line">    <span class="keyword">auto</span> result = server-&gt;start_server(8080);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (result.is_err()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to start server: &quot;</span></div>
<div class="line">                  &lt;&lt; result.error().message</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot; (code: &quot;</span> &lt;&lt; result.error().code &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Server started successfully on port 8080\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md227"></a>
Client Usage</h2>
<p><b>Before (messaging_system):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;messaging_system/network/tcp_client.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> connect_and_send() {</div>
<div class="line">    <span class="keyword">auto</span> client = std::make_shared&lt;messaging::network::tcp_client&gt;(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    client-&gt;connect(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">    client-&gt;send(<span class="stringliteral">&quot;Hello Server&quot;</span>);</div>
<div class="line">    client-&gt;disconnect();</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Compatibility Mode):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> connect_and_send() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> connect_result = client-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">    <span class="keywordflow">if</span> (connect_result.is_ok()) {</div>
<div class="line">        std::vector&lt;uint8_t&gt; data = {<span class="charliteral">&#39;H&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;o&#39;</span>};</div>
<div class="line">        <span class="keyword">auto</span> send_result = client-&gt;send_packet(data);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (send_result.is_err()) {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Send failed\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        client-&gt;stop_client();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>After (Modern API):</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_client.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> connect_and_send() {</div>
<div class="line">    <span class="keyword">auto</span> client = std::make_shared&lt;network_system::core::messaging_client&gt;(<span class="stringliteral">&quot;client&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Connect with error handling</span></div>
<div class="line">    <span class="keyword">auto</span> connect_result = client-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">    <span class="keywordflow">if</span> (connect_result.is_err()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Connection failed: &quot;</span> &lt;&lt; connect_result.error().message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Send binary data</span></div>
<div class="line">    std::vector&lt;uint8_t&gt; message = {<span class="charliteral">&#39;H&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;S&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;v&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;r&#39;</span>};</div>
<div class="line">    <span class="keyword">auto</span> send_result = client-&gt;send_packet(message);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (send_result.is_err()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Send failed: &quot;</span> &lt;&lt; send_result.error().message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Message sent successfully\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Graceful shutdown</span></div>
<div class="line">    client-&gt;stop_client();</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md229"></a>
Common Migration Issues</h1>
<p>This section addresses frequently encountered problems during migration.</p>
<h2><a class="anchor" id="autotoc_md230"></a>
Build Issues</h2>
<h3><a class="anchor" id="autotoc_md231"></a>
Issue 1: Undefined Reference to network_system Functions</h3>
<p><b>Symptom:</b> </p><div class="fragment"><div class="line">undefined reference to `network_system::core::messaging_server::start_server(unsigned short)&#39;</div>
</div><!-- fragment --><p><b>Cause:</b> NetworkSystem library not properly linked.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Ensure NetworkSystem is found and linked</div>
<div class="line">find_package(NetworkSystem REQUIRED)</div>
<div class="line">target_link_libraries(your_app PRIVATE NetworkSystem::NetworkSystem)</div>
<div class="line"> </div>
<div class="line"># Also ensure threading support</div>
<div class="line">find_package(Threads REQUIRED)</div>
<div class="line">target_link_libraries(your_app PRIVATE Threads::Threads)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md232"></a>
Issue 2: namespace 'network_module' Not Found</h3>
<p><b>Symptom:</b> </p><div class="fragment"><div class="line">error: <span class="stringliteral">&#39;network_module&#39;</span> has not been declared</div>
</div><!-- fragment --><p><b>Cause:</b> Compatibility header not included.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"><span class="comment">// Add this include at the top of your file</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md233"></a>
Issue 3: C++20 Compiler Errors</h3>
<p><b>Symptom:</b> </p><div class="fragment"><div class="line">error: &#39;concept&#39; does not name a type</div>
<div class="line">error: coroutine support requires -fcoroutines</div>
</div><!-- fragment --><p><b>Cause:</b> Compiler doesn't support C++20 or not enabled.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Ensure C++20 is enabled</div>
<div class="line">set(CMAKE_CXX_STANDARD 20)</div>
<div class="line">set(CMAKE_CXX_STANDARD_REQUIRED ON)</div>
<div class="line"> </div>
<div class="line"># For GCC/Clang, you may need:</div>
<div class="line">target_compile_options(your_app PRIVATE -fcoroutines)</div>
</div><!-- fragment --><p>Update your compiler if necessary: </p><div class="fragment"><div class="line"># Ubuntu - Install GCC 11+</div>
<div class="line">sudo apt install g++-11</div>
<div class="line">export CXX=g++-11</div>
<div class="line"> </div>
<div class="line"># macOS - Use latest Xcode Command Line Tools</div>
<div class="line">xcode-select --install</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md234"></a>
Issue 4: ASIO Not Found</h3>
<p><b>Symptom:</b> </p><div class="fragment"><div class="line">CMake Error: Could not find a package configuration file provided by &quot;asio&quot;</div>
</div><!-- fragment --><p><b>Cause:</b> ASIO library not installed.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Ubuntu/Debian</div>
<div class="line">sudo apt install libasio-dev</div>
<div class="line"> </div>
<div class="line"># macOS</div>
<div class="line">brew install asio</div>
<div class="line"> </div>
<div class="line"># Or use Boost.Asio instead (already included in most systems)</div>
<div class="line"># network_system will automatically detect and use Boost.Asio</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md235"></a>
Runtime Issues</h2>
<h3><a class="anchor" id="autotoc_md236"></a>
Issue 5: Segmentation Fault on Server Start</h3>
<p><b>Symptom:</b> Application crashes when calling <code>start_server()</code>.</p>
<p><b>Cause:</b> Network system not initialized or thread pool not available.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"><span class="comment">// Always initialize before use</span></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;server&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> result = server-&gt;start_server(8080);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ... your code ...</span></div>
<div class="line"> </div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md237"></a>
Issue 6: Connection Timeout</h3>
<p><b>Symptom:</b> Client fails to connect with timeout error.</p>
<p><b>Cause:</b> Server not fully started before client connects, or firewall blocking.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"><span class="comment">// Add delay after server start</span></div>
<div class="line">server-&gt;start_server(8080);</div>
<div class="line">std::this_thread::sleep_for(std::chrono::milliseconds(100));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or check server status</span></div>
<div class="line"><span class="keyword">auto</span> result = server-&gt;start_server(8080);</div>
<div class="line"><span class="keywordflow">if</span> (result.is_ok()) {</div>
<div class="line">    <span class="comment">// Server started successfully</span></div>
<div class="line">    client-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check firewall settings</span></div>
<div class="line"><span class="comment">// Linux: sudo ufw allow 8080</span></div>
<div class="line"><span class="comment">// macOS: System Preferences &gt; Security &amp; Privacy &gt; Firewall</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md238"></a>
Issue 7: Memory Leak Warnings</h3>
<p><b>Symptom:</b> AddressSanitizer or Valgrind reports memory leaks.</p>
<p><b>Cause:</b> Missing shutdown call or server/client not properly stopped.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> cleanup() {</div>
<div class="line">    <span class="comment">// Always stop clients and servers before shutdown</span></div>
<div class="line">    client-&gt;stop_client();</div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Call shutdown to clean up resources</span></div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or use RAII pattern</span></div>
<div class="line"><span class="keyword">class </span>NetworkGuard {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    NetworkGuard() { kcenon::network::compat::initialize(); }</div>
<div class="line">    ~NetworkGuard() { kcenon::network::compat::shutdown(); }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    NetworkGuard guard;  <span class="comment">// Automatic cleanup</span></div>
<div class="line">    <span class="comment">// Your network code...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md239"></a>
Performance Issues</h2>
<h3><a class="anchor" id="autotoc_md240"></a>
Issue 8: Lower Throughput Than Expected</h3>
<p><b>Symptom:</b> Performance benchmarks show lower throughput than advertised (&lt; 100K msg/s).</p>
<p><b>Cause:</b> Debug build, thread pool not configured, or buffer sizes not optimized.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Ensure Release build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line"> </div>
<div class="line"># Enable link-time optimization</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// Configure thread pool for better performance</span></div>
<div class="line"><span class="keyword">auto</span>&amp; thread_mgr = network_system::integration::thread_integration_manager::instance();</div>
<div class="line"><span class="keyword">auto</span> thread_pool = std::make_shared&lt;network_system::integration::basic_thread_pool&gt;();</div>
<div class="line">thread_pool-&gt;start(std::thread::hardware_concurrency());  <span class="comment">// Use all cores</span></div>
<div class="line">thread_mgr.set_thread_pool(thread_pool);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md241"></a>
Issue 9: High Latency</h3>
<p><b>Symptom:</b> Message latency &gt; 1ms for localhost connections.</p>
<p><b>Cause:</b> Nagle's algorithm enabled, buffering delays, or system overload.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"><span class="comment">// Disable Nagle&#39;s algorithm (TCP_NODELAY) if needed</span></div>
<div class="line"><span class="comment">// This is typically handled internally by network_system</span></div>
<div class="line"><span class="comment">// But you can verify in your system logs</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reduce buffering for low-latency applications</span></div>
<div class="line"><span class="comment">// Check that you&#39;re using the zero-copy pipeline feature</span></div>
</div><!-- fragment --><p>Run performance tests: </p><div class="fragment"><div class="line">cd network_system/build</div>
<div class="line">./benchmark  # Should show 305K+ msg/s average</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md242"></a>
Integration Issues</h2>
<h3><a class="anchor" id="autotoc_md243"></a>
Issue 10: container_system Integration Failure</h3>
<p><b>Symptom:</b> </p><div class="fragment"><div class="line">error: <span class="stringliteral">&#39;container_system&#39;</span> is not a member of <span class="stringliteral">&#39;network_system::integration&#39;</span></div>
</div><!-- fragment --><p><b>Cause:</b> network_system not built with container_system support.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Rebuild network_system with container integration</div>
<div class="line">cd network_system/build</div>
<div class="line">cmake .. -DBUILD_WITH_CONTAINER_SYSTEM=ON</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// Check if container support is available</span></div>
<div class="line"><span class="preprocessor">#if BUILD_WITH_CONTAINER_SYSTEM</span></div>
<div class="line">    <span class="comment">// Use container integration</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">    #warning &quot;Container system integration not available&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md244"></a>
Issue 11: thread_system Integration Failure</h3>
<p><b>Symptom:</b> Thread pool not working or threads not being used.</p>
<p><b>Cause:</b> thread_system not properly integrated.</p>
<p><b>Solution:</b> </p><div class="fragment"><div class="line"># Rebuild with thread_system support</div>
<div class="line">cmake .. -DBUILD_WITH_THREAD_SYSTEM=ON</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// Manually configure thread pool</span></div>
<div class="line"><span class="keyword">auto</span>&amp; thread_mgr = network_system::integration::thread_integration_manager::instance();</div>
<div class="line"><span class="keywordflow">if</span> (!thread_mgr.get_thread_pool()) {</div>
<div class="line">    <span class="keyword">auto</span> pool = std::make_shared&lt;network_system::integration::basic_thread_pool&gt;();</div>
<div class="line">    thread_mgr.set_thread_pool(pool);</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md246"></a>
Testing Your Migration</h1>
<p>Comprehensive testing ensures a successful migration.</p>
<h2><a class="anchor" id="autotoc_md247"></a>
Compilation Tests</h2>
<h3><a class="anchor" id="autotoc_md248"></a>
Test 1: Clean Build</h3>
<div class="fragment"><div class="line"># Clean everything</div>
<div class="line">rm -rf build/</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line"> </div>
<div class="line"># Configure</div>
<div class="line">cmake .. -G Ninja -DCMAKE_BUILD_TYPE=Release</div>
<div class="line"> </div>
<div class="line"># Build with all warnings</div>
<div class="line">cmake --build . -- -v 2&gt;&amp;1 | tee build.log</div>
<div class="line"> </div>
<div class="line"># Check for warnings</div>
<div class="line">grep -i &quot;warning&quot; build.log</div>
</div><!-- fragment --><p><b>Expected:</b> Zero warnings, clean build.</p>
<h3><a class="anchor" id="autotoc_md249"></a>
Test 2: Multiple Configurations</h3>
<div class="fragment"><div class="line"># Test Debug build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Debug &amp;&amp; cmake --build .</div>
<div class="line"> </div>
<div class="line"># Test Release build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release &amp;&amp; cmake --build .</div>
<div class="line"> </div>
<div class="line"># Test with sanitizers</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Debug \</div>
<div class="line">         -DCMAKE_CXX_FLAGS=&quot;-fsanitize=address,undefined&quot; \</div>
<div class="line">         &amp;&amp; cmake --build .</div>
</div><!-- fragment --><p><b>Expected:</b> All configurations build successfully.</p>
<h2><a class="anchor" id="autotoc_md250"></a>
Functional Tests</h2>
<h3><a class="anchor" id="autotoc_md251"></a>
Test 3: Basic Connectivity</h3>
<div class="fragment"><div class="line"><span class="comment">// test_basic_connectivity.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;test_server&quot;</span>);</div>
<div class="line">    assert(server-&gt;start_server(8888).is_ok());</div>
<div class="line"> </div>
<div class="line">    std::this_thread::sleep_for(std::chrono::milliseconds(50));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;test_client&quot;</span>);</div>
<div class="line">    assert(client-&gt;start_client(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8888).is_ok());</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;uint8_t&gt; data = {1, 2, 3, 4, 5};</div>
<div class="line">    assert(client-&gt;send_packet(data).is_ok());</div>
<div class="line"> </div>
<div class="line">    client-&gt;stop_client();</div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Basic connectivity test PASSED\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md252"></a>
Test 4: Concurrent Connections</h3>
<div class="fragment"><div class="line"><span class="comment">// test_concurrent.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;concurrent_server&quot;</span>);</div>
<div class="line">    server-&gt;start_server(9000);</div>
<div class="line"> </div>
<div class="line">    std::this_thread::sleep_for(std::chrono::milliseconds(100));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> NUM_CLIENTS = 10;</div>
<div class="line">    std::vector&lt;std::thread&gt; threads;</div>
<div class="line">    std::atomic&lt;int&gt; success_count{0};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_CLIENTS; ++i) {</div>
<div class="line">        threads.emplace_back([i, &amp;success_count]() {</div>
<div class="line">            <span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;client_&quot;</span> + std::to_string(i));</div>
<div class="line">            <span class="keywordflow">if</span> (client-&gt;start_client(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 9000).is_ok()) {</div>
<div class="line">                success_count++;</div>
<div class="line">                std::vector&lt;uint8_t&gt; data = {<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(i)};</div>
<div class="line">                client-&gt;send_packet(data);</div>
<div class="line">                client-&gt;stop_client();</div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : threads) {</div>
<div class="line">        t.join();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Concurrent test: &quot;</span> &lt;&lt; success_count &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; NUM_CLIENTS</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot; clients connected successfully\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> (success_count == NUM_CLIENTS) ? 0 : 1;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md253"></a>
Performance Tests</h2>
<h3><a class="anchor" id="autotoc_md254"></a>
Test 5: Throughput Benchmark</h3>
<div class="fragment"><div class="line"><span class="comment">// test_throughput.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;perf_server&quot;</span>);</div>
<div class="line">    server-&gt;start_server(9090);</div>
<div class="line"> </div>
<div class="line">    std::this_thread::sleep_for(std::chrono::milliseconds(100));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> client = network_module::create_client(<span class="stringliteral">&quot;perf_client&quot;</span>);</div>
<div class="line">    client-&gt;start_client(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 9090);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> NUM_MESSAGES = 10000;</div>
<div class="line">    std::vector&lt;uint8_t&gt; data(64, 0x42);  <span class="comment">// 64-byte message</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> start = std::chrono::high_resolution_clock::now();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_MESSAGES; ++i) {</div>
<div class="line">        client-&gt;send_packet(data);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> end = std::chrono::high_resolution_clock::now();</div>
<div class="line">    <span class="keyword">auto</span> duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end - start);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> throughput = (NUM_MESSAGES * 1000.0) / duration.count();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Throughput: &quot;</span> &lt;&lt; throughput &lt;&lt; <span class="stringliteral">&quot; msg/s\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Expected: &gt; 100,000 msg/s\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Result: &quot;</span> &lt;&lt; (throughput &gt; 100000 ? <span class="stringliteral">&quot;PASSED&quot;</span> : <span class="stringliteral">&quot;NEEDS INVESTIGATION&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    client-&gt;stop_client();</div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md255"></a>
Test 6: Latency Benchmark</h3>
<div class="fragment"><div class="line"># Use included benchmark tool</div>
<div class="line">cd network_system/build</div>
<div class="line">./benchmark</div>
<div class="line"> </div>
<div class="line"># Expected output:</div>
<div class="line"># Average Throughput: 305,255 msg/s</div>
<div class="line"># Average Latency: 584.22 μs</div>
<div class="line"># Performance Rating: EXCELLENT</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md256"></a>
Integration Tests</h2>
<h3><a class="anchor" id="autotoc_md257"></a>
Test 7: Existing Application Tests</h3>
<p>Run your existing test suite to ensure compatibility:</p>
<div class="fragment"><div class="line"># Run your existing tests</div>
<div class="line">cd your_application/build</div>
<div class="line">ctest --output-on-failure</div>
<div class="line"> </div>
<div class="line"># Or run specific test binary</div>
<div class="line">./your_network_tests --verbose</div>
<div class="line"> </div>
<div class="line"># With memory checking</div>
<div class="line">valgrind --leak-check=full ./your_network_tests</div>
</div><!-- fragment --><p><b>Expected:</b> All existing tests pass without modification.</p>
<h3><a class="anchor" id="autotoc_md258"></a>
Test 8: End-to-End Scenario</h3>
<p>Create a complete workflow test that mirrors your production use case:</p>
<div class="fragment"><div class="line"><span class="comment">// test_e2e_scenario.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Simulate your production workflow</span></div>
<div class="line">    kcenon::network::compat::initialize();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 1. Server setup</span></div>
<div class="line">    <span class="keyword">auto</span> server = network_module::create_server(<span class="stringliteral">&quot;production_server&quot;</span>);</div>
<div class="line">    server-&gt;start_server(8080);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Multiple clients connect</span></div>
<div class="line">    <span class="keyword">auto</span> client1 = network_module::create_client(<span class="stringliteral">&quot;client1&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> client2 = network_module::create_client(<span class="stringliteral">&quot;client2&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    client1-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line">    client2-&gt;start_client(<span class="stringliteral">&quot;localhost&quot;</span>, 8080);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 3. Exchange messages</span></div>
<div class="line">    std::vector&lt;uint8_t&gt; msg1 = {<span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;S&#39;</span>, <span class="charliteral">&#39;G&#39;</span>, <span class="charliteral">&#39;1&#39;</span>};</div>
<div class="line">    std::vector&lt;uint8_t&gt; msg2 = {<span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;S&#39;</span>, <span class="charliteral">&#39;G&#39;</span>, <span class="charliteral">&#39;2&#39;</span>};</div>
<div class="line"> </div>
<div class="line">    client1-&gt;send_packet(msg1);</div>
<div class="line">    client2-&gt;send_packet(msg2);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 4. Graceful shutdown</span></div>
<div class="line">    client1-&gt;stop_client();</div>
<div class="line">    client2-&gt;stop_client();</div>
<div class="line">    server-&gt;stop_server();</div>
<div class="line"> </div>
<div class="line">    kcenon::network::compat::shutdown();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;End-to-end scenario test PASSED\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md260"></a>
Rollback Plan</h1>
<p>If issues arise during migration, follow these rollback procedures.</p>
<h2><a class="anchor" id="autotoc_md261"></a>
Quick Rollback</h2>
<p>If you need to immediately revert:</p>
<div class="fragment"><div class="line"># If you used git branch</div>
<div class="line">git checkout main  # or your previous branch</div>
<div class="line">git branch -D migration/network-system</div>
<div class="line"> </div>
<div class="line"># If you created a filesystem backup</div>
<div class="line">rm -rf /path/to/your/project</div>
<div class="line">cp -r /path/to/backup/project_TIMESTAMP /path/to/your/project</div>
<div class="line"> </div>
<div class="line"># Rebuild with original configuration</div>
<div class="line">cd /path/to/your/project</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. &amp;&amp; cmake --build .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md262"></a>
Partial Rollback</h2>
<p>If only specific components have issues:</p>
<ol type="1">
<li><b>Revert specific files:</b> <div class="fragment"><div class="line"># Revert CMakeLists.txt changes only</div>
<div class="line">git checkout HEAD -- CMakeLists.txt</div>
<div class="line"> </div>
<div class="line"># Revert specific source files</div>
<div class="line">git checkout HEAD -- src/network/problematic_file.cpp</div>
</div><!-- fragment --></li>
<li><b>Keep new network_system but use compatibility mode:</b> <div class="fragment"><div class="line"><span class="comment">// Switch from modern API back to compatibility mode</span></div>
<div class="line"><span class="comment">// Change this:</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/core/messaging_server.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>kcenon::network::core;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Back to this:</span></div>
<div class="line"><span class="preprocessor">#include &lt;network_system/compatibility.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>network_module;</div>
</div><!-- fragment --></li>
<li><b>Document issues:</b> <div class="fragment"><div class="line"># Rollback Notes</div>
<div class="line"> </div>
<div class="line">Date: 2025-10-22</div>
<div class="line">Reason: Performance regression in concurrent scenario</div>
<div class="line">Components reverted:</div>
<div class="line">  - src/network/concurrent_handler.cpp</div>
<div class="line">  - src/network/session_manager.cpp</div>
<div class="line"> </div>
<div class="line">Files kept:</div>
<div class="line">  - CMakeLists.txt (using NetworkSystem)</div>
<div class="line">  - Basic client/server code (compatibility mode)</div>
<div class="line"> </div>
<div class="line">Next steps:</div>
<div class="line">  - Investigate performance issue</div>
<div class="line">  - Re-attempt migration with fixes</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md264"></a>
Performance Expectations</h1>
<p>After successful migration, you should observe these performance characteristics:</p>
<h2><a class="anchor" id="autotoc_md265"></a>
Throughput Metrics</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Message Size   </th><th class="markdownTableHeadNone">Expected Throughput   </th><th class="markdownTableHeadNone">Test Command    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Small (64B)   </td><td class="markdownTableBodyNone">769,230+ msg/s   </td><td class="markdownTableBodyNone"><code>./benchmark --size=64</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Medium (1KB)   </td><td class="markdownTableBodyNone">128,205+ msg/s   </td><td class="markdownTableBodyNone"><code>./benchmark --size=1024</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Large (8KB)   </td><td class="markdownTableBodyNone">20,833+ msg/s   </td><td class="markdownTableBodyNone"><code>./benchmark --size=8192</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Mixed Average</b>   </td><td class="markdownTableBodyNone"><b>305,255+ msg/s</b>   </td><td class="markdownTableBodyNone"><code>./benchmark</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md266"></a>
Latency Metrics</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Percentile   </th><th class="markdownTableHeadNone">Expected Latency   </th><th class="markdownTableHeadNone">Measurement Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">P50 (Median)   </td><td class="markdownTableBodyNone">&lt; 50 μs   </td><td class="markdownTableBodyNone">High-resolution timer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">P95   </td><td class="markdownTableBodyNone">&lt; 500 μs   </td><td class="markdownTableBodyNone">Latency distribution    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">P99   </td><td class="markdownTableBodyNone">&lt; 1 ms   </td><td class="markdownTableBodyNone">Stress test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Average</b>   </td><td class="markdownTableBodyNone"><b>584 μs</b>   </td><td class="markdownTableBodyNone">Overall average   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md267"></a>
Concurrency Metrics</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Concurrent Connections   </th><th class="markdownTableHeadNone">Stable Throughput   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10 clients   </td><td class="markdownTableBodyNone">100K+ msg/s   </td><td class="markdownTableBodyNone">Linear scaling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">50 clients   </td><td class="markdownTableBodyNone">12,195+ msg/s per client   </td><td class="markdownTableBodyNone">Production baseline    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">100 clients   </td><td class="markdownTableBodyNone">Graceful degradation   </td><td class="markdownTableBodyNone">System-dependent   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md268"></a>
Resource Usage</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Expected Usage   </th><th class="markdownTableHeadNone">Monitoring    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Memory (baseline)   </td><td class="markdownTableBodyNone">&lt; 10 MB   </td><td class="markdownTableBodyNone">Before connections    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Memory (per connection)   </td><td class="markdownTableBodyNone">Linear scaling   </td><td class="markdownTableBodyNone">~10KB overhead    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU (idle)   </td><td class="markdownTableBodyNone">&lt; 1%   </td><td class="markdownTableBodyNone">Server waiting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CPU (active)   </td><td class="markdownTableBodyNone">Scales with cores   </td><td class="markdownTableBodyNone">Multi-threaded   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md269"></a>
Comparison with Legacy</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">messaging_system   </th><th class="markdownTableHeadNone">network_system   </th><th class="markdownTableHeadNone">Improvement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Throughput   </td><td class="markdownTableBodyNone">~100K msg/s   </td><td class="markdownTableBodyNone">305K+ msg/s   </td><td class="markdownTableBodyNone"><b>3x faster</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Latency   </td><td class="markdownTableBodyNone">~1.5 ms   </td><td class="markdownTableBodyNone">584 μs   </td><td class="markdownTableBodyNone"><b>2.5x lower</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Memory   </td><td class="markdownTableBodyNone">15 MB baseline   </td><td class="markdownTableBodyNone">&lt; 10 MB   </td><td class="markdownTableBodyNone"><b>33% reduction</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Concurrent clients   </td><td class="markdownTableBodyNone">20-30 stable   </td><td class="markdownTableBodyNone">50+ stable   </td><td class="markdownTableBodyNone"><b>2x capacity</b>   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md271"></a>
Support and Resources</h1>
<h2><a class="anchor" id="autotoc_md272"></a>
Documentation</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>API Reference</b>   </td><td class="markdownTableBodyNone">docs/API_REFERENCE.md   </td><td class="markdownTableBodyNone">Complete API documentation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Migration Guide</b>   </td><td class="markdownTableBodyNone">This document   </td><td class="markdownTableBodyNone">Step-by-step migration instructions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Architecture Guide</b>   </td><td class="markdownTableBodyNone">docs/ARCHITECTURE.md   </td><td class="markdownTableBodyNone">System design and patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Integration Guide</b>   </td><td class="markdownTableBodyNone">docs/INTEGRATION.md   </td><td class="markdownTableBodyNone">Ecosystem integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Troubleshooting</b>   </td><td class="markdownTableBodyNone">docs/TROUBLESHOOTING.md   </td><td class="markdownTableBodyNone">Common issues and solutions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Changelog</b>   </td><td class="markdownTableBodyNone">CHANGELOG.md   </td><td class="markdownTableBodyNone">Version history   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md273"></a>
Sample Code</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Sample   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Basic Usage</b>   </td><td class="markdownTableBodyNone"><a href="/Users/raphaelshin/Sources/network_system/samples/basic_usage.cpp">samples/basic_usage.cpp</a>   </td><td class="markdownTableBodyNone">Simple client/server example    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>TCP Demo</b>   </td><td class="markdownTableBodyNone"><a href="/Users/raphaelshin/Sources/network_system/samples/tcp_server_client.cpp">samples/tcp_server_client.cpp</a>   </td><td class="markdownTableBodyNone">Full TCP implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Integration</b>   </td><td class="markdownTableBodyNone"><a href="/Users/raphaelshin/Sources/network_system/samples/messaging_system_integration/">samples/messaging_system_integration/</a>   </td><td class="markdownTableBodyNone">messaging_system integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Benchmarks</b>   </td><td class="markdownTableBodyNone"><a href="/Users/raphaelshin/Sources/network_system/benchmarks/">benchmarks/</a>   </td><td class="markdownTableBodyNone">Performance testing   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md274"></a>
Community Support</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Channel   </th><th class="markdownTableHeadNone">Link   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>GitHub Issues</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/network_system/issues">https://github.com/kcenon/network_system/issues</a>   </td><td class="markdownTableBodyNone">Bug reports and feature requests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>GitHub Discussions</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/network_system/discussions">https://github.com/kcenon/network_system/discussions</a>   </td><td class="markdownTableBodyNone">Q&amp;A and community help    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Email</b>   </td><td class="markdownTableBodyNone"><a href="#" onclick="location.href='mai'+'lto:'+'kce'+'no'+'n@n'+'av'+'er.'+'co'+'m'; return false;">kceno<span class="obfuscator">.nosp@m.</span>n@na<span class="obfuscator">.nosp@m.</span>ver.c<span class="obfuscator">.nosp@m.</span>om</a>   </td><td class="markdownTableBodyNone">Direct support   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md275"></a>
Related Projects</h2>
<p>Ecosystem projects that integrate with network_system:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Project   </th><th class="markdownTableHeadNone">Repository   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>messaging_system</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/messaging_system">https://github.com/kcenon/messaging_system</a>   </td><td class="markdownTableBodyNone">Message routing and delivery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>container_system</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/container_system">https://github.com/kcenon/container_system</a>   </td><td class="markdownTableBodyNone">Data serialization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>thread_system</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/thread_system">https://github.com/kcenon/thread_system</a>   </td><td class="markdownTableBodyNone">Thread pool management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>logger_system</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/logger_system">https://github.com/kcenon/logger_system</a>   </td><td class="markdownTableBodyNone">Structured logging    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>common_system</b>   </td><td class="markdownTableBodyNone"><a href="https://github.com/kcenon/common_system">https://github.com/kcenon/common_system</a>   </td><td class="markdownTableBodyNone">Shared utilities and Result&lt;T&gt;   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md277"></a>
Conclusion</h1>
<p>This migration guide has walked you through the complete process of migrating from <code>messaging_system</code>'s integrated network module to the standalone <code>network_system</code> library.</p>
<h2><a class="anchor" id="autotoc_md278"></a>
Key Takeaways</h2>
<p>✅ <b>100% Backward Compatibility</b> - Use compatibility mode for zero-downtime migration ✅ <b>3x Performance Improvement</b> - Achieve 305K+ msg/s throughput ✅ <b>Modern C++20 Features</b> - Leverage coroutines and Result&lt;T&gt; error handling ✅ <b>Independent &amp; Modular</b> - Integrate into any C++ project ✅ <b>Production Ready</b> - Comprehensive testing and validation</p>
<h2><a class="anchor" id="autotoc_md279"></a>
Next Steps</h2>
<ol type="1">
<li><b>Complete your migration</b> using the step-by-step guide</li>
<li><b>Run performance tests</b> to verify improvements</li>
<li><b>Update documentation</b> for your team</li>
<li><b>Provide feedback</b> via GitHub Issues or email</li>
</ol>
<h2><a class="anchor" id="autotoc_md280"></a>
Questions or Issues?</h2>
<p>If you encounter any problems during migration:</p>
<ol type="1">
<li>Check the Common Migration Issues section</li>
<li>Review the Troubleshooting Guide</li>
<li>Search <a href="https://github.com/kcenon/network_system/issues">GitHub Issues</a></li>
<li>Contact support: <a href="#" onclick="location.href='mai'+'lto:'+'kce'+'no'+'n@n'+'av'+'er.'+'co'+'m'; return false;">kceno<span class="obfuscator">.nosp@m.</span>n@na<span class="obfuscator">.nosp@m.</span>ver.c<span class="obfuscator">.nosp@m.</span>om</a></li>
</ol>
<hr  />
<p><b>Document Information</b></p>
<ul>
<li><b>Version</b>: 0.1.0.0</li>
<li><b>Last Updated</b>: 2025-10-22</li>
<li><b>Maintainer</b>: <a href="#" onclick="location.href='mai'+'lto:'+'kce'+'no'+'n@n'+'av'+'er.'+'co'+'m'; return false;">kceno<span class="obfuscator">.nosp@m.</span>n@na<span class="obfuscator">.nosp@m.</span>ver.c<span class="obfuscator">.nosp@m.</span>om</a></li>
<li><b>License</b>: BSD-3-Clause</li>
<li><b>Repository</b>: <a href="https://github.com/kcenon/network_system">https://github.com/kcenon/network_system</a></li>
</ul>
<hr  />
<p><em>Happy migrating! Feel free to reach out if you need help with your migration.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
